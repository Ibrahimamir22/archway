class ProjectViewSet(viewsets.ReadOnlyModelViewSet):
    queryset = Project.objects.all()
    permission_classes = [permissions.AllowAny]
    filter_backends = [filters.SearchFilter, DjangoFilterBackend, filters.OrderingFilter]
    search_fields = ['title_en', 'title_ar', 'description_en', 'description_ar']
    filterset_fields = ['category__slug', 'tags__slug', 'is_featured', 'is_published']
    ordering = ['-created_at']
    lookup_field = 'slug'

    def get_serializer_context(self):
        context = super().get_serializer_context()
        context['language'] = self.request.query_params.get('lang', get_language() or 'en')
        return context

    def get_serializer_class(self):
        if self.action == 'list':
            return LocalizedProjectListSerializer
        return LocalizedProjectDetailSerializer









